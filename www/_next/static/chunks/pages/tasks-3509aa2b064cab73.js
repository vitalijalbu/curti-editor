(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3689],{3600:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var r=(0,a(853).Z)("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]])},2871:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return a(56)}])},3941:function(e,t,a){"use strict";a.d(t,{ds:function(){return s},e5:function(){return o},j1:function(){return i},oR:function(){return l},tI:function(){return c}});var r=a(6726),n=a(7790);let s=async e=>{try{null==e||e.query;let t=await r.ZP.get("/api/companies?populate=*");return t.data}catch(e){return n.ZP.open({type:"error",content:"Errore"})}},c=async e=>{try{let t=await r.ZP.get("/api/companies/".concat(e,"?populate=*"));return t.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},o=async e=>{try{let t=await r.ZP.post("/api/companies/",e);return t.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},i=async(e,t)=>{try{let a=await r.ZP.delete("/api/companies/".concat(e),t);return a.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},l=async()=>{try{let e=await r.ZP.delete("/api/companies?populate=*");return e.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}}},388:function(e,t,a){"use strict";a.d(t,{_5:function(){return i},hy:function(){return s},st:function(){return n},vr:function(){return c},xJ:function(){return o}});var r=a(6726);let n=async()=>{try{let e=await r.ZP.get("/api/section-tasks?populate=*.,project.id,project.title,tasks.*");return e.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},s=async()=>{try{let e=await r.ZP.get("/api/tasks?populate=*&pagination[pageSize]=5");return e.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},c=async()=>{try{let e=await r.ZP.delete("/api/tasks?populate=*");return e.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},o=async()=>{try{let e=await r.ZP.delete("/api/tasks?populate=*");return e.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},i=async()=>{try{let e=await r.ZP.delete("/api/tasks?populate=*");return e.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}}},56:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var r=a(5893),n=a(7294),s=a(1664),c=a.n(s),o=a(7484),i=a(1552),l=a(7790),d=a(6713),u=a(7911),p=a(1577),h=a(1230),m=a(5746),Z=a(4749);a(3600);var x=a(8836),g=a(7225),j=a(9965),f=a(9531),y=a(5265),k=a(2400),w=a(2269),b=a(4420),P=a(2968);a(3941);let{Title:I,Text:A}=j.Z,{Textarea:v}=f.Z,C=e=>{let{opened:t,toggle:a,data:n}=e,[s]=i.Z.useForm();return(0,r.jsx)(y.Z,{open:t,onClose:a,title:n?"Modifica task":"Aggiungi task",position:"right",size:"large",children:(0,r.jsxs)(i.Z,{name:"create-project",layout:"vertical",form:s,autoComplete:"off",children:[(0,r.jsx)(i.Z.Item,{name:"title",label:"Nome del progetto",rules:[{required:!0}],children:(0,r.jsx)(f.Z,{})}),(0,r.jsxs)(h.Z,{gutter:8,children:[(0,r.jsx)(m.Z,{span:12,children:(0,r.jsx)(i.Z.Item,{name:"date_start",label:"Data inizio",rules:[{required:!0}],children:(0,r.jsx)(k.Z,{})})}),(0,r.jsx)(m.Z,{span:12,children:(0,r.jsx)(i.Z.Item,{name:"date_end",label:"Data fine",rules:[{required:!0}],children:(0,r.jsx)(k.Z,{})})})]}),(0,r.jsxs)(h.Z,{gutter:8,children:[(0,r.jsx)(m.Z,{span:12,children:(0,r.jsx)(i.Z.Item,{name:"assignees",label:"Utenti assegnati",children:(0,r.jsx)(b.Z,{})})}),(0,r.jsx)(m.Z,{span:12,children:(0,r.jsx)(i.Z.Item,{name:"customer",label:"Cliente",rules:[{required:!1}],children:(0,r.jsx)(P.Z,{})})})]}),(0,r.jsxs)(h.Z,{gutter:8,children:[(0,r.jsx)(m.Z,{span:18,children:(0,r.jsx)(i.Z.Item,{name:"locked",help:"Un progetto bloccato fa si che gli utenti non possano aggiungere task",label:"Bloccato",children:(0,r.jsx)(w.Z,{})})}),(0,r.jsx)(m.Z,{span:6,children:(0,r.jsx)(i.Z.Item,{name:"color",label:"Colore",rules:[{required:!1}],children:(0,r.jsx)(f.Z,{type:"color"})})})]}),(0,r.jsx)(i.Z.Item,{name:"description",label:"Descrizione",children:(0,r.jsx)(f.Z.TextArea,{rows:6})}),(0,r.jsxs)(h.Z,{gutter:8,children:[(0,r.jsx)(m.Z,{span:12,children:(0,r.jsx)(p.ZP,{block:!0,onClick:a,children:"Chiudi"})}),(0,r.jsx)(m.Z,{span:12,children:(0,r.jsx)(i.Z.Item,{children:(0,r.jsx)(p.ZP,{type:"primary",htmlType:"submit",block:!0,children:"Crea progetto"})})})]})]})})};var E=a(388);let _=()=>{let[e]=i.Z.useForm(),[t,a]=(0,n.useState)("create"),[s,j]=(0,n.useState)(!0),[f,y]=(0,n.useState)([]),[k,w]=(0,n.useState)({}),[b,P]=(0,n.useState)({}),[I,A]=(0,n.useState)(!1),v=i.Z.useWatch([],e),_=()=>{A(!0),a("create"),w(null)},Y=()=>{A(!1),w()},D=(0,n.useCallback)(e=>{(0,E.st)(e).then(e=>{let{data:t}=e;y(t||[])}).finally(()=>{j(!1)})},[]);(0,n.useEffect)(()=>{D(v)},[D,v]);let F=async e=>{"update"==t?(console.log(f),await (0,E.xJ)(k.id,{data:e}).then(e=>{let{res:t}=e;A(!1),a(),D(),null!==t&&l.ZP.success("Task modificato con successo")}).catch(e=>{l.ZP.error(e)})):await (0,E.vr)({data:e}).then(e=>{let{res:t}=e;A(!1),D(),null!==t&&l.ZP.success("Task creato con successo")}).catch(e=>{console.log("catch-error")})};return(0,r.jsxs)("div",{className:"page",children:[!!I&&(0,r.jsx)(C,{opened:I,onClose:Y,data:k,method:t,onSubmit:e=>F(e)}),(0,r.jsx)(g.m,{title:"Task",icon:(0,r.jsx)(x.Z,{}),items:[{label:"Elenco",url:"/tasks"},{label:"Calendario",url:"/tasks/calendar"},{label:"Report",url:"/tasks/dashboard"}],extra:[(0,r.jsx)(p.ZP,{type:"primary",onClick:_,children:"Aggiungi"})]}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(m.Z,{span:24,children:(0,r.jsx)(Z.Z,{columns:[{title:"Nome",key:"title",render:e=>{let{id:t,title:a,logo_img:n}=e;return(0,r.jsx)(c(),{href:"/tasks/".concat(t),children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(u.C,{size:"small",shape:"square",style:{backgroundColor:"#fde3cf",color:"#f56a00"},icon:(0,r.jsx)(x.Z,{className:"anticon"})})," ",a]})})}},{title:"Societ\xe0",key:"company",dataIndex:"company",render:e=>(0,r.jsx)(c(),{href:"/settings/company/",children:null==e?void 0:e.title})},{title:"Task",key:"customer",dataIndex:"customer",render:e=>(0,r.jsx)(c(),{href:"/customers/".concat(null==e?void 0:e.id),children:null==e?void 0:e.title})},{title:"Data creazione",key:"publishedAt",dataIndex:"publishedAt",render:e=>(0,r.jsx)("p",{children:o(e).format("DD/MM/YYYY")})},{title:"Data creazione",key:"publishedAt",dataIndex:"publishedAt",render:e=>(0,r.jsx)("p",{children:o(e).format("DD/MM/YYYY")})},{title:"Avanzamento",key:"publishedAt",dataIndex:"publishedAt",render:e=>(0,r.jsx)("p",{children:o(e).format("DD/MM/YYYY")})}],dataSource:f,rowKey:"id",pagination:{position:["bottomCenter"],pageSize:20}})})})]})};var Y=_}},function(e){e.O(0,[7225,8925,4749,5265,9774,2888,179],function(){return e(e.s=2871)}),_N_E=e.O()}]);