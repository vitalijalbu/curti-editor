(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9220],{5993:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/companies/[id]",function(){return a(8252)}])},3941:function(e,t,a){"use strict";a.d(t,{ds:function(){return i},e5:function(){return s},j1:function(){return c},oR:function(){return o},tI:function(){return l}});var n=a(6726),r=a(7790);let i=async e=>{try{null==e||e.query;let t=await n.ZP.get("/api/companies?populate=*");return t.data}catch(e){return r.ZP.open({type:"error",content:"Errore"})}},l=async e=>{try{let t=await n.ZP.get("/api/companies/".concat(e,"?populate=*"));return t.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},s=async e=>{try{let t=await n.ZP.post("/api/companies/",e);return t.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},c=async(e,t)=>{try{let a=await n.ZP.delete("/api/companies/".concat(e),t);return a.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}},o=async()=>{try{let e=await n.ZP.delete("/api/companies?populate=*");return e.data}catch(e){throw Error("Failed to get data from API: ".concat(e.message))}}},8252:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var n=a(5893),r=a(7294);a(1664);var i=a(7484),l=a(1163),s=a(9965),c=a(1552),o=a(7790),d=a(1577),u=a(1230),m=a(5746),h=a(4436),x=a(9531),Z=a(5022),j=a(6074),p=a(1158),f=a(7225),v=a(3941),b=a(5170);let{Dragger:y}=b.Z,{Text:g}=s.Z,_=()=>{let e=(0,l.useRouter)(),{id:t}=e.query,[a,s]=(0,r.useState)(!0),[b,y]=(0,r.useState)({}),[_,I]=(0,r.useState)([]),[w]=c.Z.useForm();(0,r.useEffect)(()=>{(0,v.tI)(t).then(e=>{var t,a;let{data:{data:n}}=e;s(!0),y(n),w.setFieldsValue({title:null==n?void 0:n.title,description:null==n?void 0:n.description,website:null==n?void 0:n.website,phone_number:null==n?void 0:n.phone_number,email:null==n?void 0:n.email,type:null==n?void 0:n.type,vat_number:null==n?void 0:n.vat_number,city:null==n?void 0:null===(t=n.location)||void 0===t?void 0:t.city,formatted_address:null==n?void 0:null===(a=n.location)||void 0===a?void 0:a.formatted_address})}).finally(()=>{s(!1)})},[t]);let P=e=>{(0,v.j1)(t,{data:e}).then(e=>{let{res:t}=e;null!==t&&o.ZP.success("Societ\xe0 aggiornata con successo")}).catch(e=>{o.ZP.error(null==e?void 0:e.message)})};return(0,n.jsxs)("div",{className:"page",children:[(0,n.jsx)(f.m,{title:b.title,extra:[(0,n.jsx)(d.ZP,{type:"primary",onClick:P,children:"Salva"}),(0,n.jsx)(d.ZP,{type:"text",danger:!0,onClick:"",children:"Elimina"})]}),(0,n.jsxs)(u.Z,{gutter:16,children:[(0,n.jsx)(m.Z,{span:16,children:(0,n.jsxs)(c.Z,{name:"update-winery",onFinish:P,layout:"vertical",form:w,children:[(0,n.jsxs)(h.Z,{title:"Informazioni",className:"mb-3",children:[(0,n.jsxs)(u.Z,{gutter:8,children:[(0,n.jsx)(m.Z,{span:18,children:(0,n.jsx)(c.Z.Item,{name:"title",label:"Titolo",rules:[{required:!0}],children:(0,n.jsx)(x.Z,{})})}),(0,n.jsx)(m.Z,{span:6,children:(0,n.jsx)(c.Z.Item,{name:"vat_number",label:"P.Iva",rules:[{required:!0}],children:(0,n.jsx)(x.Z,{})})})]}),(0,n.jsxs)(u.Z,{gutter:8,children:[(0,n.jsx)(m.Z,{span:12,children:(0,n.jsx)(c.Z.Item,{name:"email",label:"E-mail",rules:[{required:!0}],children:(0,n.jsx)(x.Z,{})})}),(0,n.jsx)(m.Z,{span:12,children:(0,n.jsx)(c.Z.Item,{name:"phone_number",label:"Telefono",rules:[{required:!0}],children:(0,n.jsx)(x.Z,{})})})]}),(0,n.jsxs)(u.Z,{gutter:8,children:[(0,n.jsx)(m.Z,{span:16,children:(0,n.jsx)(c.Z.Item,{name:"website",label:"Sito web",children:(0,n.jsx)(x.Z,{})})}),(0,n.jsx)(m.Z,{span:8,children:(0,n.jsx)(c.Z.Item,{name:"type",label:"Tipologia",rules:[{required:!0}],children:(0,n.jsx)(Z.Z,{placeholder:"Seleziona tipologia",options:_})})})]}),(0,n.jsx)(c.Z.Item,{name:"description",label:"Descrizione",children:(0,n.jsx)(x.Z.TextArea,{rows:6})})]}),(0,n.jsxs)(h.Z,{title:"Localit\xe0",className:"mb-3",children:[(0,n.jsxs)(u.Z,{gutter:8,children:[(0,n.jsx)(m.Z,{span:18,children:(0,n.jsx)(c.Z.Item,{name:"formatted_address",label:"Indirizzo Completo",children:(0,n.jsx)(x.Z,{})})}),(0,n.jsx)(m.Z,{span:6,children:(0,n.jsx)(c.Z.Item,{name:"street_address_2",label:"N\xb0 civico",children:(0,n.jsx)(x.Z,{})})})]}),(0,n.jsxs)(u.Z,{gutter:8,children:[(0,n.jsx)(m.Z,{span:12,children:(0,n.jsx)(c.Z.Item,{name:"city",label:"Citt\xe0",children:(0,n.jsx)(x.Z,{})})}),(0,n.jsx)(m.Z,{span:12,children:(0,n.jsx)(c.Z.Item,{name:"zip_code",label:"CAP",children:(0,n.jsx)(x.Z,{})})})]})]})]})}),(0,n.jsx)(m.Z,{span:8,children:(0,n.jsxs)(h.Z,{title:"Dettagli",className:"mb-3",children:[(0,n.jsx)(j.Z,{}),(0,n.jsx)(p.ZP,{className:"demo-loadmore-list",itemLayout:"horizontal",children:(0,n.jsxs)(p.ZP.Item,{children:[(0,n.jsx)(p.ZP.Item.Meta,{title:"Data creazione"}),(0,n.jsx)("div",{children:(0,n.jsx)(g,{strong:!0,children:(0,n.jsx)("a",{href:"#",children:i(b.createdAt).format("DD-MM-YYYY")})})})]})})]})})]})]})};var I=_}},function(e){e.O(0,[7225,4436,8925,1158,9814,8647,9774,2888,179],function(){return e(e.s=5993)}),_N_E=e.O()}]);